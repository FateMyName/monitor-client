<html>

<head>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="./log.css">
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>
  <section id="app">
    <h1>Log Viewer</h1>

    <div class="row">
      <section v-for="slotId in Object.keys(slots)" class="col-12">
        <div class="my-3">
          <p class="log-subscription-info" v-if="!slots[slotId].isSubscribed">No log subscription.</p>
          <p class="log-subscription-info" v-else>Subscribed logs from port {{ slots[slotId].port}},
            {{ slots[slotId].filename }}.log</p>
        </div>

        <form class="form-inline">
          <div class="form-group mx-2 mb-2">
            <input v-model="slots[slotId].port" type="text" class="form-control" placeholder="Enter port number">
          </div>
          <div class="form-group mx-2 mb-2">
            <select class="form-control" id="exampleFormControlSelect1" v-model="slots[slotId].filename">
              <option value="main">main.log</option>
              <option value="out">out.log</option>
              <option value="p2p">p2p.log</option>
              <option value="fatal">fatal.log</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary mb-2" @click="onClickSubscribe($event, slotId)">Subscribe
            {{slotId}}</button>
        </form>
        <textarea class="log-output-container" :id="`output-${slotId}`" spellcheck="false"
          v-if="slots[slotId].isSubscribed && slots[slotId].output" width="100%">{{ slots[slotId].output }}</textarea>
        <textarea class="log-output-container" v-else-if="slots[slotId].isSubscribed"
          width="100%">Waiting log output from server...</textarea>
      </section>
    </div>
  </section>
  <script src="log.js"></script>

</body>

</html>